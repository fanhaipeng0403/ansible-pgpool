---

- name: update /etc/rsyslog.d/50-default.conf
  ansible.builtin.blockinfile:
    block: "{{ lookup('ansible.builtin.file', '{{ playbook_dir }}/files/logs/50-default.conf') }}"
    path: /etc/rsyslog.d/50-default.conf
    marker: "# {mark} ANSIBLE MANAGED BLOCK"
    backup: yes
    create: yes

- name: update /etc/logrotate.d/rsyslog
  ansible.builtin.blockinfile:
    block: "{{ lookup('ansible.builtin.file', '{{ playbook_dir }}/files/logs/rsyslog') }}"
    path: /etc/logrotate.d/rsyslog
    insertbefore: "BOF"
    marker: ""
    backup: yes
    create: yes
  notify: Restart rsyslog


- name: execute some log related shell commands
  ansible.builtin.script: "{{ playbook_dir }}/scripts/config.sh"
